<!DOCTYPE html>
<html class="light" lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/layout :: adminHead">
    <title>ShenPCare - User Detail</title>
</head>
<body class="font-display bg-background-light">

<div th:replace="admin/layout :: adminShell(~{::section}, ${activeMenu})">
    <section>
        <div class="mx-auto max-w-4xl">

            <!-- Heading -->
            <div class="flex flex-wrap justify-between gap-3 mb-6">
                <div class="flex flex-col gap-2">
                    <p class="text-[#03594D] text-4xl font-black leading-tight tracking-[-0.033em]"
                       th:text="${isEdit} ? 'Chỉnh sửa Người dùng' : 'Thêm Người dùng mới'">
                        Chi tiết Người dùng
                    </p>
                    <p class="text-[#5b8c85] text-base font-normal leading-normal">
                        Thêm mới hoặc chỉnh sửa thông tin người dùng trong hệ thống.
                    </p>
                </div>
            </div>

            <!-- Form -->
            <form class="mt-4"
                  th:action="@{/admin/users/save}"
                  th:object="${userForm}"
                  method="post">

                <!-- hidden userId khi edit -->
                <input type="hidden" th:field="*{userId}"/>

                <!-- Thông tin đăng nhập & Cá nhân -->
                <div class="space-y-6 border border-[#cce2df]/80 rounded-xl p-6 bg-white">
                    <h2 class="text-[#03594d] text-lg font-bold">Thông tin đăng nhập &amp; Cá nhân</h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                        <!-- Username -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Tên đăng nhập</p>
                            <input th:field="*{username}"
                                   class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                          text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                          border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                          p-[15px] text-base font-normal leading-normal"
                                   placeholder="Nhập tên đăng nhập"/>
                        </label>

                        <!-- Password -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Mật khẩu</p>
                            <div class="relative">
                                <input th:field="*{password}"
                                       type="password"
                                       class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                              text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                              border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                              p-[15px] pr-12 text-base font-normal leading-normal"
                                       placeholder="••••••••"/>
                                <button class="absolute inset-y-0 right-0 flex items-center px-4 text-[#5b8c85]"
                                        type="button">
                                    <span class="material-symbols-outlined">visibility_off</span>
                                </button>
                            </div>
                            <p class="text-[#5b8c85] text-xs mt-1.5">
                                Bỏ trống nếu không muốn thay đổi mật khẩu
                            </p>
                        </label>

                        <!-- Full name -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Họ và tên</p>
                            <input th:field="*{fullName}"
                                   class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                          text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                          border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                          p-[15px] text-base font-normal leading-normal"
                                   placeholder="Nhập họ và tên người dùng"/>
                        </label>

                        <!-- Email -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Email</p>
                            <input th:field="*{email}"
                                   type="email"
                                   class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                          text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                          border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                          p-[15px] text-base font-normal leading-normal"
                                   placeholder="Nhập địa chỉ email"/>
                        </label>

                        <!-- Phone -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Số điện thoại</p>
                            <input th:field="*{phone}"
                                   type="tel"
                                   class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                          text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                          border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                          p-[15px] text-base font-normal leading-normal"
                                   placeholder="Nhập số điện thoại"/>
                        </label>

                        <!-- Status -->
                        <label class="flex flex-col">
                            <p class="text-[#03594d] text-base font-medium pb-2">Trạng thái</p>
                            <div class="relative">
                                <select th:field="*{status}"
                                        class="form-select appearance-none w-full cursor-pointer rounded-lg
                                               text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                               border border-[#cce2df] bg-white h-14 p-[15px]
                                               text-base font-normal leading-normal">
                                    <option value="ACTIVE">Hoạt động</option>
                                    <option value="LOCKED">Bị khóa</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-[#03594d]">
                                    <span class="material-symbols-outlined">expand_more</span>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Vai trò & Thông tin nhân viên -->
                <div class="mt-8 space-y-6 border border-[#cce2df]/80 rounded-xl p-6 bg-white">
                    <div class="flex flex-col gap-6">
                        <h2 class="text-[#03594d] text-lg font-bold">Vai trò &amp; Phân quyền</h2>

                        <!-- Role -->
                        <label class="flex flex-col md:max-w-xs">
                            <p class="text-[#03594d] text-base font-medium pb-2">Vai trò</p>
                            <div class="relative">
                                <select th:field="*{role}"
                                        class="form-select appearance-none w-full cursor-pointer rounded-lg
                                               text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                               border border-[#cce2df] bg-white h-14 p-[15px]
                                               text-base font-normal leading-normal">
                                    <option th:each="r : ${roles}"
                                            th:value="${r}"
                                            th:text="${r}">
                                    </option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-[#03594d]">
                                    <span class="material-symbols-outlined">expand_more</span>
                                </div>
                            </div>
                        </label>
                    </div>

                    <div class="space-y-6 border-t border-[#cce2df]/80 pt-6">
                        <h3 class="text-[#03594d] text-md font-bold">Thông tin nhân viên</h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                            <!-- Hire date -->
                            <label class="flex flex-col">
                                <p class="text-[#03594d] text-base font-medium pb-2">Ngày tuyển dụng</p>
                                <input th:field="*{hireDate}"
                                       type="date"
                                       class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                              text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                              border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                              p-[15px] text-base font-normal leading-normal"/>
                            </label>

                            <!-- Specialization -->
                            <label class="flex flex-col">
                                <p class="text-[#03594d] text-base font-medium pb-2">Chuyên môn</p>
                                <input th:field="*{specialization}"
                                       class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                              text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                              border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                              p-[15px] text-base font-normal leading-normal"
                                       placeholder="VD: Bác sĩ thú y, Groomer, CSKH"/>
                            </label>

                            <!-- License number -->
                            <label class="flex flex-col md:col-span-2">
                                <p class="text-[#03594d] text-base font-medium pb-2">Số chứng chỉ hành nghề</p>
                                <input th:field="*{licenseNumber}"
                                       class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg
                                              text-[#03594d] focus:outline-0 focus:ring-2 focus:ring-[#d8e268]/50
                                              border border-[#cce2df] bg-white h-14 placeholder:text-[#5b8c85]
                                              p-[15px] text-base font-normal leading-normal"
                                       placeholder="Nhập số chứng chỉ nếu có"/>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="flex justify-end gap-4 pt-8 mt-8">
                    <a th:href="@{/admin/users}"
                       class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full
                              h-12 px-6 bg-[#f0f0f0] text-[#03594d] text-sm font-bold leading-normal tracking-[0.015em]
                              hover:bg-gray-200 transition-colors">
                        <span class="truncate">Hủy bỏ</span>
                    </a>
                    <button type="submit"
                            class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-full
                                   h-12 px-6 bg-[#d8e268] text-[#03594d] text-sm font-bold leading-normal tracking-[0.015em]
                                   hover:bg-opacity-90 transition-colors gap-2">
                        <span class="material-symbols-outlined">save</span>
                        <span class="truncate"
                              th:text="${isEdit} ? 'Lưu thay đổi' : 'Tạo người dùng'">
                            Lưu thay đổi
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </section>
</div>

</body>
</html>
