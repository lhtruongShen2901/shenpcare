<!DOCTYPE html>
<html class="light" lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/layout :: adminHead">
    <title th:text="${isEdit} ? 'Sửa Dịch vụ' : 'Thêm Dịch vụ mới'">ShenPCare - Dịch vụ</title>
</head>
<body class="font-display bg-background-light">

<div th:replace="admin/layout :: adminShell(~{::section}, ${activeMenu})">
    <section>
        <div class="mx-auto max-w-3xl">
            
            <div class="mb-6">
                <a th:href="@{/admin/services}" class="text-sm text-gray-500 hover:text-[#03594D] flex items-center gap-1 mb-2">
                    <span class="material-symbols-outlined text-sm">arrow_back</span> Quay lại danh sách
                </a>
                <h1 class="text-[#03594D] text-3xl font-black tracking-tight"
                    th:text="${isEdit} ? 'Chỉnh sửa Dịch vụ' : 'Thêm Dịch vụ Mới'">
                    Thêm Dịch vụ
                </h1>
                <p class="text-gray-500 mt-1">Cấu hình thông tin chi tiết cho dịch vụ khám chữa hoặc chăm sóc.</p>
            </div>

            <form th:action="@{/admin/services/save}" th:object="${service}" method="post" 
                  class="bg-white rounded-2xl shadow-sm border border-[#E3E5D2] p-8">

                <input type="hidden" th:field="*{serviceId}"/>

                <div class="space-y-6">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <label class="flex flex-col gap-2">
                            <span class="text-sm font-bold text-[#03594D]">Tên dịch vụ <span class="text-red-500">*</span></span>
                            <input type="text" th:field="*{name}" required maxlength="100"
                                   class="h-12 px-4 rounded-xl border border-gray-200 bg-[#F8F8F6] text-[#03594D] focus:ring-2 focus:ring-[#D8E268] focus:border-transparent outline-none transition-all"
                                   placeholder="Ví dụ: Cạo vôi răng, Spa trọn gói..."/>
                        </label>

                        <label class="flex flex-col gap-2">
                            <span class="text-sm font-bold text-[#03594D]">Danh mục <span class="text-red-500">*</span></span>
                            <div class="relative">
                                <select th:field="*{serviceCategoryId}" required
                                        class="h-12 w-full px-4 rounded-xl border border-gray-200 bg-[#F8F8F6] text-[#03594D] appearance-none focus:ring-2 focus:ring-[#D8E268] focus:border-transparent outline-none cursor-pointer">
                                    <option value="" disabled selected>-- Chọn nhóm dịch vụ --</option>
                                    <option th:each="cat : ${categories}"
                                            th:value="${cat.serviceCategoryId}"
                                            th:text="${cat.name}">
                                        Khám bệnh
                                    </option>
                                </select>
                                <span class="material-symbols-outlined absolute right-4 top-3 text-gray-400 pointer-events-none">expand_more</span>
                            </div>
                        </label>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <label class="flex flex-col gap-2">
                            <span class="text-sm font-bold text-[#03594D]">Giá cơ bản (VNĐ) <span class="text-red-500">*</span></span>
                            <div class="relative">
                                <input type="number" th:field="*{basePrice}" required min="0" step="1000"
                                       class="h-12 w-full pl-4 pr-12 rounded-xl border border-gray-200 bg-[#F8F8F6] text-[#03594D] font-mono focus:ring-2 focus:ring-[#D8E268] outline-none"
                                       placeholder="0"/>
                                <span class="absolute right-4 top-3 text-gray-400 text-sm font-medium">VNĐ</span>
                            </div>
                        </label>

                        <label class="flex flex-col gap-2">
                            <span class="text-sm font-bold text-[#03594D]">Thời lượng ước tính <span class="text-red-500">*</span></span>
                            <div class="relative">
                                <input type="number" th:field="*{durationMinutes}" required min="5" step="5"
                                       class="h-12 w-full pl-4 pr-12 rounded-xl border border-gray-200 bg-[#F8F8F6] text-[#03594D] font-mono focus:ring-2 focus:ring-[#D8E268] outline-none"
                                       placeholder="30"/>
                                <span class="absolute right-4 top-3 text-gray-400 text-sm font-medium">Phút</span>
                            </div>
                            <p class="text-xs text-gray-500">Dùng để tính slot đặt lịch.</p>
                        </label>
                    </div>

                    <label class="flex flex-col gap-2">
                        <span class="text-sm font-bold text-[#03594D]">Mô tả chi tiết</span>
                        <textarea th:field="*{description}" rows="4" maxlength="500"
                                  class="p-4 rounded-xl border border-gray-200 bg-[#F8F8F6] text-[#03594D] focus:ring-2 focus:ring-[#D8E268] outline-none resize-none"
                                  placeholder="Nhập mô tả về quy trình, lưu ý cho khách hàng..."></textarea>
                    </label>

                    <div th:if="${isEdit}" class="flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-dashed border-gray-300">
                        <span class="text-sm font-bold text-[#03594D]">Trạng thái:</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" th:field="*{active}" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#03594D]"></div>
                            <span class="ml-3 text-sm font-medium text-gray-700" 
                                  th:text="${service.active} ? 'Đang hoạt động' : 'Tạm ngưng'">Active</span>
                        </label>
                    </div>

                </div>

                <div class="mt-8 pt-6 border-t border-gray-100 flex justify-end gap-3">
                    <a th:href="@{/admin/services}"
                       class="px-6 py-3 rounded-full bg-gray-100 text-gray-600 font-bold hover:bg-gray-200 transition-colors">
                        Hủy bỏ
                    </a>
                    <button type="submit"
                            class="px-8 py-3 rounded-full bg-[#D8E268] text-[#03594D] font-bold shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all flex items-center gap-2">
                        <span class="material-symbols-outlined">save</span>
                        Lưu Dịch vụ
                    </button>
                </div>

            </form>
        </div>
    </section>
</div>

</body>
</html>