<!DOCTYPE html>
<html class="light" lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="adminHead">
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Tiêu đề: nếu controller không set pageTitle thì dùng mặc định -->
    <title th:text="${pageTitle} ?: 'ShenPCare Admin Dashboard'">
        ShenPCare Admin Dashboard
    </title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet"/>

    <!-- CSS riêng của admin layout (bạn tự tạo file này) -->
    <!--<link rel="stylesheet" th:href="@{/css/admin-layout.css}"/> -->

    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>

    <!-- Cấu hình màu Tailwind (nếu muốn dùng) -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#d8e269",
                        "background-light": "#f8f8f6",
                        "background-dark": "#1f2012",
                    },
                    fontFamily: {
                        display: ["Plus Jakarta Sans", "Noto Sans", "sans-serif"]
                    },
                    borderRadius: {
                        DEFAULT: "1rem",
                        lg: "2rem",
                        xl: "3rem",
                        full: "9999px"
                    },
                },
            },
        }
    </script>
</head>

<body class="font-display bg-background-light">

<!-- Fragment khung layout: nhận 2 tham số content + activeMenu -->
<div th:fragment="adminShell(content, activeMenu)"
     class="relative flex h-auto min-h-screen w-full flex-col bg-background-light group/design-root overflow-x-hidden">

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside
            class="flex h-screen min-h-[700px] w-64 flex-col justify-between border-r border-[#E3E5D2] bg-white p-4 sticky top-0">
            <div class="flex flex-col gap-8">

                <!-- Logo + tên clinic -->
                <div class="flex items-center gap-3 px-3 py-2">
                    <div class="size-8 text-[#03594D]">
                        <svg fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M24 2L46 24L24 46L2 24Z"></path>
                        </svg>
                    </div>
                    <h2 class="text-[#03594D] text-lg font-bold leading-tight tracking-[-0.015em]"
                        th:text="${clinicName} ?: 'ShenPCare Clinic'">
                        ShenPCare Clinic
                    </h2>
                </div>

                <!-- Menu -->
                <div class="flex flex-col gap-2 text-sm font-medium">

                    <a th:href="@{/admin/dashboard}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'dashboard' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">dashboard</span>
                        <p class="text-[#03594D]">Dashboard</p>
                    </a>

                    <a th:href="@{/admin/services}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'services' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">store</span>
                        <p class="text-[#03594D]">Services &amp; Clinic</p>
                    </a>

                    <a th:href="@{/admin/users}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'users' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">group</span>
                        <p class="text-[#03594D]">Users &amp; Roles</p>
                    </a>

                    <a th:href="@{/admin/schedule}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'schedule' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">event_available</span>
                        <p class="text-[#03594D]">Working schedule &amp; Slot</p>
                    </a>

                    <a th:href="@{/admin/payment-config}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'payment' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">credit_card</span>
                        <p class="text-[#03594D]">Payment config</p>
                    </a>

                    <a th:href="@{/admin/content}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'content' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">article</span>
                        <p class="text-[#03594D]">Content (Blog, FAQ)</p>
                    </a>

                    <a th:href="@{/admin/internal-requests}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'requests' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">forward_to_inbox</span>
                        <p class="text-[#03594D]">Internal Requests</p>
                    </a>

                    <a th:href="@{/admin/customer-360}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'customer360' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">person_search</span>
                        <p class="text-[#03594D]">Customer 360</p>
                    </a>

                    <a th:href="@{/admin/reports}"
                       class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors"
                       th:classappend="${activeMenu} == 'reports' ? ' bg-primary' : ''">
                        <span class="material-symbols-outlined text-[#03594D]">analytics</span>
                        <p class="text-[#03594D]">Reports</p>
                    </a>
                </div>
            </div>

            <!-- Logout -->
            <div class="mt-8 border-t border-[#E3E5D2] pt-4">
                <a th:href="@{/logout}"
                   class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-primary/20 transition-colors">
                    <span class="material-symbols-outlined text-[#03594D]">logout</span>
                    <p class="text-[#03594D]">Logout</p>
                </a>
            </div>
        </aside>

        <!-- Phần bên phải: topbar + nội dung -->
        <div class="flex flex-1 flex-col">

            <!-- Top bar -->
            <header
                class="flex items-center justify-end whitespace-nowrap border-b border-[#E3E5D2] bg-white px-10 py-3 sticky top-0 z-10">
                <div class="flex items-center gap-4">
                    <div class="flex flex-col text-right">
                        <h1 class="text-[#03594D] text-base font-medium leading-normal"
                            th:text="${currentUser} ?: 'admin'">
                            admin
                        </h1>
                        <p class="text-gray-500 text-sm font-normal leading-normal">Administrator</p>
                    </div>
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12"
                         data-alt="Admin avatar"
                         style="background-image: url('https://lh3.googleusercontent.com/a/default-user');">
                    </div>
                </div>
            </header>

            <!-- Main content: chỗ page con render -->
            <main class="flex-1 p-8 bg-background-light">
                <div th:replace="${content}"></div>
            </main>
        </div>
    </div>
</div>

</body>
</html>
